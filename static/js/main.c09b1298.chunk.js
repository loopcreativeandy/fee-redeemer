(this["webpackJsonpandys-fee-redeemer"]=this["webpackJsonpandys-fee-redeemer"]||[]).push([[0],{132:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y}));var r=n(29),a=n(8),c=n(3),o=n.n(c),i=n(59);function s(e,t,n){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(o.a.mark((function e(t,n,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e,t){var n=e.publicKey.toBase58();return{account:e,id:t,link:b(n),lamports:e.lamports}})),l(t,a,r),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,n){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(o.a.mark((function e(t,n,a){var c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(r.a)(n),e.prev=1,c.s();case 3:if((i=c.n()).done){e.next=9;break}return s=i.value,e.next=7,h(t,s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c.e(e.t0);case 14:return e.prev=14,c.f(),e.finish(14);case 17:a(n);case 18:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function b(e){return"https://solscan.io/address/"+e}var p=new i.d.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function f(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.d.PublicKey.findProgramAddress([e.from("metadata"),p.toBuffer(),n.toBuffer()],p);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.account.mint);case 2:return r=e.sent,n.metadata=r,e.next=6,x(t,r);case 6:n.name=e.sent,console.log(r.toBase58()+" "+n.name);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(o.a.mark((function e(t,n){var r,a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if(!(r=e.sent)){e.next=16;break}a=r.data.slice(69,101),c=r.data.readUInt32LE(65),i="",s=0;case 8:if(!(s<c)){e.next=15;break}if(0!==a.readUInt8(s)){e.next=11;break}return e.abrupt("break",15);case 11:i+=String.fromCharCode(a.readUInt8(s));case 12:s++,e.next=8;break;case 15:return e.abrupt("return",i);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return e.filter((function(e){return!t||t.includes(e.id)})).map((function(e){return e.account.publicKey}))}}).call(this,n(25).Buffer)},286:function(e,t,n){},287:function(e,t){},288:function(e,t){},316:function(e,t){},317:function(e,t){},348:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"frcnt","instructions":[{"name":"initialize","accounts":[{"name":"feecntrAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"count","accounts":[{"name":"feecntrAccount","isMut":true,"isSigner":false},{"name":"instructionSysvarAccount","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"FeeCounter","type":{"kind":"struct","fields":[{"name":"closedAccounts","type":"u64"}]}}],"metadata":{"address":"FrctRs3dZ7E234V5DMJLMUvnPkjANWQoaZDRm9rebjC2"}}')},353:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(34),o=n.n(c),i=(n(286),n(59)),s=n(15),u=n(463),l=n(464),d=n(465),b=n(451),p=n(452),f=n(466),j=n(460),h=n(161),m=n(251),x=n(453),O=n(30),y=n(29),v=n(8),g=n(6),w=n(49),k=n(3),S=n.n(k),A=n(445),C=n(436),P=n(461),R=n(131),T=n(457),K=n(456),M=n(446),I=n(454),E=n(235),B=n(132),U=n(166),D=.00203928;function L(e){return e.map((function(e){return e.lamports})).reduce((function(e,t){return e+t}),0)/s.LAMPORTS_PER_SOL}function N(e){return e.map((function(e){return e.publicKey}))}function F(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(v.a)(S.a.mark((function e(t,n){var r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if((r=e.sent)&&r.data){e.next=6;break}return console.log("Could not get account info for "+n.toBase58()),e.abrupt("return",null);case 6:return a=r.data.readInt32LE(8),e.abrupt("return",{totalCloses:a,totalSolRedeemed:D*a});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(S.a.mark((function e(t,n){var r,a,c,o,i,u,l,d,b,p,f;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenAccountsByOwner(n,{programId:U.a});case 2:r=e.sent,a=[],c=Object(y.a)(r.value),e.prev=5,c.s();case 7:if((o=c.n()).done){e.next=28;break}if(i=o.value,u=!1,l=64,!i.account.data.readBigUInt64LE){e.next=16;break}d=i.account.data.readBigUInt64LE(l),u=0n===d,e.next=25;break;case 16:u=!0,b=0;case 18:if(!(b<8)){e.next=25;break}if(0===i.account.data[l+b]){e.next=22;break}return u=!1,e.abrupt("break",25);case 22:b++,e.next=18;break;case 25:u&&(p=new s.PublicKey(i.account.data.slice(0,32)),f={publicKey:i.pubkey,lamports:i.account.lamports,mint:p},a.push(f));case 26:e.next=7;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(5),c.e(e.t0);case 33:return e.prev=33,c.f(),e.finish(33);case 36:return e.abrupt("return",a);case 37:case"end":return e.stop()}}),e,null,[[5,30,33,36]])})))).apply(this,arguments)}function Q(e,t,n,r,a,c){return V.apply(this,arguments)}function V(){return(V=Object(v.a)(S.a.mark((function e(t,n,r,a,c,o){var u,l,d,b,p,f,j,h,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.map((function(e){return U.b.createCloseAccountInstruction(U.a,e,t,t,[])})),l=[];case 2:if(!(u.length>0)){e.next=20;break}d=new s.Transaction,b=0;case 5:if(!(b<15)){e.next=15;break}if(!(p=u.pop())){e.next=11;break}d.add(p),e.next=12;break;case 11:return e.abrupt("break",15);case 12:b++,e.next=5;break;case 15:c&&o&&(f=d.instructions.length,j=D*f*c/100,h=s.SystemProgram.transfer({fromPubkey:t,toPubkey:o,lamports:s.LAMPORTS_PER_SOL*j}),d.add(h)),r&&a&&(m=a.instruction.count({accounts:{feecntrAccount:r,instructionSysvarAccount:i.d.SYSVAR_INSTRUCTIONS_PUBKEY}}),d.add(m)),l.push(d),e.next=2;break;case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J,H,Z,q=n(439),z=n(437),X=n(1),G=function(e){var t=e.emptyAccounts,n=e.totalRedemptions,r=t?Math.ceil((null===t||void 0===t?void 0:t.length)/15):0;return Object(X.jsx)(q.a,{container:!0,direction:"row",justifyContent:"center",wrap:"nowrap",children:Object(X.jsx)(q.a,{container:!0,direction:"row",wrap:"nowrap",children:t&&Object(X.jsxs)(q.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(X.jsxs)(q.a,{container:!0,direction:"column",children:[Object(X.jsx)(z.a,{variant:"body2",color:"textSecondary",children:"Empty Accounts"}),Object(X.jsx)(z.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"".concat(null===t||void 0===t?void 0:t.length)})]}),Object(X.jsxs)(q.a,{container:!0,direction:"column",children:[Object(X.jsx)(z.a,{variant:"body2",color:"textSecondary",children:"You can redeem"}),Object(X.jsx)(z.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:$(L(t))}),(null===t||void 0===t?void 0:t.length)>0&&Object(X.jsxs)(z.a,{variant:"body2",color:"textSecondary",children:["in ","".concat(r)," transaction",1!==r&&"s"]})]}),Object(X.jsxs)(q.a,{container:!0,direction:"column",children:[Object(X.jsx)(z.a,{variant:"body2",color:"textSecondary",children:"Total Redemmed"}),Object(X.jsx)(z.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:n&&$(null===n||void 0===n?void 0:n.totalSolRedeemed)})]})]})})})},$=function(e){return"\u25ce ".concat(e.toFixed(3))},ee=n(434),te=n(440),ne=Object(R.a)(ee.a)(J||(J=Object(w.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),re=function(e){var t=e.onClick,n=e.emptyAccounts,a=Object(r.useState)(!1),c=Object(g.a)(a,2),o=c[0],i=c[1];return Object(X.jsx)(ne,{disabled:o||0===(null===n||void 0===n?void 0:n.length),onClick:Object(v.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,t();case 3:i(!1);case 4:case"end":return e.stop()}}),e)}))),variant:"contained",children:o?Object(X.jsx)(te.a,{}):0===(null===n||void 0===n?void 0:n.length)?"NO EMPTY ACCOUNTS":"REDEEM"})},ae=n(467),ce=Object(R.a)(h.a)(H||(H=Object(w.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),oe=R.a.div(Z||(Z=Object(w.a)([""]))),ie=[{field:"id",headerName:"id",width:40},{field:"account",headerName:"address",width:400,renderCell:function(e){var t=e.row.account.publicKey.toBase58();return Object(X.jsx)(ae.a,{href:Object(B.c)(t),target:"_blank",children:t})}},{field:"lamports",headerName:"lamports",width:100},{field:"mint",headerName:"mint",width:400,renderCell:function(e){var t=e.row.account.mint.toBase58();return Object(X.jsx)(ae.a,{href:Object(B.c)(t),target:"_blank",children:t})}},{field:"name",headerName:"name",width:200}],se=function(e){var t=e.connection,a=Object(r.useState)(),c=Object(g.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(),l=Object(g.a)(u,2),d=l[0],b=l[1],p=Object(r.useState)(),f=Object(g.a)(p,2),j=f[0],h=f[1],m=Object(r.useState)(!1),x=Object(g.a)(m,2),w=x[0],k=x[1],R=Object(r.useState)({open:!1,message:"",severity:void 0}),U=Object(g.a)(R,2),D=U[0],L=U[1],Y=Object(r.useState)(),_=Object(g.a)(Y,2),V=_[0],J=_[1],H=Object(r.useState)(10),Z=Object(g.a)(H,2),q=Z[0],z=Z[1],$=Object(E.b)(),ee={publicKey:$.publicKey,signAllTransactions:$.signAllTransactions,signTransaction:$.signTransaction},te=new i.b(t,ee,{preflightCommitment:"recent"}),ne=n(348),ae=new i.a(ne,e.frcntrProgramId,te),se=function(){var e=Object(v.a)(S.a.mark((function e(){var n,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return k(!0),n=function(e){h(void 0),h(e)},e.next=6,Object(B.a)(t,o,n);case 6:(r=e.sent)&&(h(r),a=r.map((function(e){return e.id})),J(a));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Object(v.a)(S.a.mark((function n(){var r,a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if($&&$.publicKey){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,W(t,$.publicKey);case 4:return r=n.sent,s(r),n.next=8,F(t,e.frcntrAccount);case 8:(a=n.sent)&&b(a);case 10:case"end":return n.stop()}}),n)})))()}),[$,t,e.frcntrAccount]);var ue=function(){var n=Object(v.a)(S.a.mark((function n(){var r,a,c,i,s,u,l,d,b,p;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!($&&$.publicKey&&o&&o.length>0)){n.next=33;break}return r=N(o),a=r,V&&j&&(console.log(V.length+" empty accounts selected."),a=Object(B.b)(j,V)),n.next=7,Q($.publicKey,a,e.frcntrAccount,ae,q,e.donationAddress);case 7:c=n.sent,i=Object(y.a)(c),n.prev=9,i.s();case 11:if((s=i.n()).done){n.next=25;break}return u=s.value,n.next=15,$.sendTransaction(u,t);case 15:return l=n.sent,console.log(l),d=u.instructions.length,console.log("Attempting to close accounts ("+d+" instructions)"),n.next=21,t.confirmTransaction(l,"confirmed");case 21:(b=n.sent).value.err?L({open:!0,message:b.value.err.toString(),severity:"warning"}):L({open:!0,message:"Successfully redeemed some SOL!",severity:"success"});case 23:n.next=11;break;case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(9),i.e(n.t0);case 30:return n.prev=30,i.f(),n.finish(30);case 33:n.next=40;break;case 35:n.prev=35,n.t1=n.catch(0),p=n.t1.msg||"Redeem failed!",console.trace(),L({open:!0,message:p,severity:"error"});case 40:return n.prev=40,n.finish(40);case 42:case"end":return n.stop()}}),n,null,[[0,35,40,42],[9,27,30,33]])})));return function(){return n.apply(this,arguments)}}();return Object(X.jsxs)(A.a,{style:{marginTop:100},children:[Object(X.jsx)(A.a,{maxWidth:"xs",style:{position:"relative"},children:Object(X.jsxs)(C.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:[Object(X.jsx)("h1",{children:"Solana Fee Redeemer"}),$.connected?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(G,{emptyAccounts:o,totalRedemptions:d}),Object(X.jsxs)(oe,{children:[Object(X.jsxs)(M.a,{spacing:2,direction:"row",alignItems:"center",children:[Object(X.jsx)("p",{children:"Donate:"}),Object(X.jsx)(K.a,{"aria-label":"Donation Percentage",defaultValue:10,step:1,min:0,max:100,onChange:function(e,t){z(t)},color:"secondary"}),Object(X.jsxs)("p",{children:[q,"%"]})]}),Object(X.jsx)(re,{emptyAccounts:o,onClick:ue})]})]}):Object(X.jsx)(ce,{children:"Connect Wallet"}),Object(X.jsx)("p",{style:{color:"gray"},children:"developed and maintained by solandy.sol"}),Object(X.jsxs)("p",{style:{color:"gray"},children:["follow me on ",Object(X.jsx)("a",{href:"https://twitter.com/HeyAndyS",children:"Twitter"})," and ",Object(X.jsx)("a",{href:"https://www.youtube.com/channel/UCURIDSvXkuDf9XXe0wYnoRg",children:"YouTube"})]})]})}),w?j&&j.length>0?Object(X.jsx)("div",{style:{width:"100%"},children:Object(X.jsx)(I.a,{sx:{color:"white",border:2},autoHeight:!0,rows:j,columns:ie,checkboxSelection:!0,selectionModel:V,onSelectionModelChange:J})}):Object(X.jsx)("p",{children:"No empty accounts."}):Object(X.jsx)("p",{onClick:se,style:{color:"white",textAlign:"center",cursor:"pointer"},children:"Show Details"}),Object(X.jsx)(P.a,{open:D.open,autoHideDuration:6e3,onClose:function(){return L(Object(O.a)(Object(O.a)({},D),{},{open:!1}))},children:Object(X.jsx)(T.a,{onClose:function(){return L(Object(O.a)(Object(O.a)({},D),{},{open:!1}))},severity:D.severity,children:D.message})})]})},ue=Object(m.a)({palette:{type:"dark"}}),le="mainnet-beta",de="https://solana-api.projectserum.com",be=new i.d.PublicKey("FrctRs3dZ7E234V5DMJLMUvnPkjANWQoaZDRm9rebjC2"),pe=new i.d.PublicKey("CntZ1JuK1kT2VA5QPkQiwU6aYiaPthP9oKeRQ76jYTCb"),fe=new i.d.PublicKey("AdonBeatQ76Vwq7VrTK2rA4DnB4NyLSHsjE5usYqWyD4"),je=new i.d.Connection(de),he=function(){var e=Object(r.useMemo)((function(){return Object(s.clusterApiUrl)(le)}),[]),t=Object(r.useMemo)((function(){return[Object(u.a)(),Object(l.a)(),Object(d.a)(),Object(b.a)({network:le}),Object(p.a)({network:le})]}),[]);return Object(X.jsx)(x.a,{theme:ue,children:Object(X.jsx)(f.a,{endpoint:e,children:Object(X.jsx)(j.a,{wallets:t,autoConnect:!0,children:Object(X.jsx)(h.b,{children:Object(X.jsx)(se,{connection:je,rpcHost:de,frcntrProgramId:be,frcntrAccount:pe,donationAddress:fe})})})})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,471)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};n(353);o.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(he,{})}),document.getElementById("root")),me()}},[[354,1,2]]]);
//# sourceMappingURL=main.c09b1298.chunk.js.map